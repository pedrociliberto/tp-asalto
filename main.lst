     1                                  %macro puts 1
     2                                      mov rdi, %1
     3                                      sub rsp, 8
     4                                      call puts
     5                                      add rsp, 8
     6                                  %endmacro
     7                                  
     8                                  %macro print 2
     9                                      mov rdi, %1
    10                                      mov rsi, %2
    11                                      sub rsp, 8
    12                                      call printf
    13                                      add rsp, 8
    14                                  %endmacro
    15                                  
    16                                  extern puts
    17                                  
    18                                  section .data
    19                                  
    20                                      ; Tableros y sus posibles estados
    21                                  
    22 00000000 202031323334353637-         tableroOrig         db " "," ","1","2","3","4","5","6","7"," ",10
    22 00000009 200A               
    23 0000000B 202020205F5F5F2020-                             db " "," "," "," ","_","_","_"," "," "," ",10 
    23 00000014 200A               
    24 00000016 3120207C5858587C20-                             db "1"," "," ","|","X","X","X","|"," "," ",10
    24 0000001F 200A               
    25 00000021 32205F7C5858587C5F-                             db "2"," ","_","|","X","X","X","|","_"," ",10
    25 0000002A 200A               
    26 0000002C 337C58585858585858-                             db "3","|","X","X","X","X","X","X","X","|",10 
    26 00000035 7C0A               
    27 00000037 347C58585858585858-                             db "4","|","X","X","X","X","X","X","X","|",10 
    27 00000040 7C0A               
    28 00000042 357C58582020205858-                             db "5","|","X","X"," "," "," ","X","X","|",10 
    28 0000004B 7C0A               
    29 0000004D 3620C2AF7C4F204F7C-                             db "6"," ","¯","|","O"," ","O","|","¯"," ",10 
    29 00000056 C2AF200A           
    30 0000005A 3720207C2020207C20-                             db "7"," "," ","|"," "," "," ","|"," "," ",10 
    30 00000063 200A               
    31 00000065 20202020C2AFC2AFC2-                             db " "," "," "," ","¯","¯","¯"," "," "," ",10,0
    31 0000006E AF2020200A00       
    32                                  
    33 00000074 202031323334353637-         tableroInv          db " "," ","1","2","3","4","5","6","7"," ",10
    33 0000007D 200A               
    34 0000007F 202020205F5F5F2020-                             db " "," "," "," ","_","_","_"," "," "," ",10 
    34 00000088 200A               
    35 0000008A 3120207C2020207C20-                             db "1"," "," ","|"," "," "," ","|"," "," ",10
    35 00000093 200A               
    36 00000095 32205F7C4F204F7C5F-                             db "2"," ","_","|","O"," ","O","|","_"," ",10
    36 0000009E 200A               
    37 000000A0 337C58582020205858-                             db "3","|","X","X"," "," "," ","X","X","|",10 
    37 000000A9 7C0A               
    38 000000AB 347C58585858585858-                             db "4","|","X","X","X","X","X","X","X","|",10 
    38 000000B4 7C0A               
    39 000000B6 357C58585858585858-                             db "5","|","X","X","X","X","X","X","X","|",10 
    39 000000BF 7C0A               
    40 000000C1 3620C2AF7C5858587C-                             db "6"," ","¯","|","X","X","X","|","¯"," ",10 
    40 000000CA C2AF200A           
    41 000000CE 3720207C5858587C20-                             db "7"," "," ","|","X","X","X","|"," "," ",10 
    41 000000D7 200A               
    42 000000D9 20202020C2AFC2AFC2-                             db " "," "," "," ","¯","¯","¯"," "," "," ",10,0
    42 000000E2 AF2020200A00       
    43                                  
    44 000000E8 202031323334353637-         tableroIzq          db " "," ","1","2","3","4","5","6","7"," ",10
    44 000000F1 200A               
    45 000000F3 202020205F5F5F2020-                             db " "," "," "," ","_","_","_"," "," "," ",10 
    45 000000FC 200A               
    46 000000FE 3120207C5858587C20-                             db "1"," "," ","|","X","X","X","|"," "," ",10
    46 00000107 200A               
    47 00000109 32205F7C5858587C5F-                             db "2"," ","_","|","X","X","X","|","_"," ",10
    47 00000112 200A               
    48 00000114 337C58585858204F20-                             db "3","|","X","X","X","X"," ","O"," ","|",10 
    48 0000011D 7C0A               
    49 0000011F 347C58585858202020-                             db "4","|","X","X","X","X"," "," "," ","|",10 
    49 00000128 7C0A               
    50 0000012A 357C58585858204F20-                             db "5","|","X","X","X","X"," ","O"," ","|",10 
    50 00000133 7C0A               
    51 00000135 3620C2AF7C5858587C-                             db "6"," ","¯","|","X","X","X","|","¯"," ",10 
    51 0000013E C2AF200A           
    52 00000142 3720207C5858587C20-                             db "7"," "," ","|","X","X","X","|"," "," ",10 
    52 0000014B 200A               
    53 0000014D 20202020C2AFC2AFC2-                             db " "," "," "," ","¯","¯","¯"," "," "," ",10,0
    53 00000156 AF2020200A00       
    54                                  
    55 0000015C 202031323334353637-         tableroDer          db " "," ","1","2","3","4","5","6","7"," ",10
    55 00000165 200A               
    56 00000167 202020205F5F5F2020-                             db " "," "," "," ","_","_","_"," "," "," ",10 
    56 00000170 200A               
    57 00000172 3120207C5858587C20-                             db "1"," "," ","|","X","X","X","|"," "," ",10
    57 0000017B 200A               
    58 0000017D 32205F7C5858587C5F-                             db "2"," ","_","|","X","X","X","|","_"," ",10
    58 00000186 200A               
    59 00000188 337C204F2058585858-                             db "3","|"," ","O"," ","X","X","X","X","|",10 
    59 00000191 7C0A               
    60 00000193 347C20202058585858-                             db "4","|"," "," "," ","X","X","X","X","|",10 
    60 0000019C 7C0A               
    61 0000019E 357C204F2058585858-                             db "5","|"," ","O"," ","X","X","X","X","|",10 
    61 000001A7 7C0A               
    62 000001A9 3620C2AF7C5858587C-                             db "6"," ","¯","|","X","X","X","|","¯"," ",10 
    62 000001B2 C2AF200A           
    63 000001B6 3720207C5858587C20-                             db "7"," "," ","|","X","X","X","|"," "," ",10 
    63 000001BF 200A               
    64 000001C1 20202020C2AFC2AFC2-                             db " "," "," "," ","¯","¯","¯"," "," "," ",10,0
    64 000001CA AF2020200A00       
    65                                  
    66                                      ; Mensajes
    67                                  
    68 000001D0 C2A14269656E76656E-         msgBienvenida       db "¡Bienvenido al juego El Asalto!", 0
    68 000001D9 69646F20616C206A75-
    68 000001E2 65676F20456C204173-
    68 000001EB 616C746F2100       
    69                                  
    70 000001F1 C2BF44657365612070-         msgPersonalizarTablero  db "¿Desea personalizar el tablero? (s/n): ", 0 
    70 000001FA 6572736F6E616C697A-
    70 00000203 617220656C20746162-
    70 0000020C 6C65726F3F2028732F-
    70 00000215 6E293A2000         
    71                                      
    72 0000021A C2A153652070756564-         msgPregRotacion         db "¡Se puede rotar el tablero! Elija una de las opciones (1-4):", 0
    72 00000223 6520726F7461722065-
    72 0000022C 6C207461626C65726F-
    72 00000235 2120456C696A612075-
    72 0000023E 6E61206465206C6173-
    72 00000247 206F7063696F6E6573-
    72 00000250 2028312D34293A00   
    73 00000258 312E20526F74617220-         msgRotacionesPosibles   db "1. Rotar a la izquierda", 0
    73 00000261 61206C6120697A7175-
    73 0000026A 696572646100       
    74 00000270 322E20526F74617220-                                 db "2. Rotar a la derecha", 0
    74 00000279 61206C612064657265-
    74 00000282 63686100           
    75 00000286 332E20496E76657274-                                 db "3. Invertir el tablero", 0
    75 0000028F 697220656C20746162-
    75 00000298 6C65726F00         
    76 0000029D 342E204E6F20726F74-                                 db "4. No rotar", 0
    76 000002A6 617200             
    77                                      
    78 000002A9 C2A1456C696A616D6F-         msgPersonalizarSimb     db "¡Elijamos los símbolos para cada personaje!", 0
    78 000002B2 73206C6F732073C3AD-
    78 000002BB 6D626F6C6F73207061-
    78 000002C4 726120636164612070-
    78 000002CD 6572736F6E616A6521-
    78 000002D6 00                 
    79 000002D7 53C3AD6D626F6C6F20-         msgSimboloOficiales     db "Símbolo para los oficiales:", 0
    79 000002E0 70617261206C6F7320-
    79 000002E9 6F66696369616C6573-
    79 000002F2 3A00               
    80 000002F4 53C3AD6D626F6C6F20-         msgSimboloSoldados      db "Símbolo para los soldados:", 0
    80 000002FD 70617261206C6F7320-
    80 00000306 736F6C6461646F733A-
    80 0000030F 00                 
    81                                  
    82 00000310 C2BF517569C3A96E20-         msgQuienInicia          db "¿Quién inicia el juego: oficiales o soldados? (o/s): ", 0
    82 00000319 696E6963696120656C-
    82 00000322 206A7565676F3A206F-
    82 0000032B 66696369616C657320-
    82 00000334 6F20736F6C6461646F-
    82 0000033D 733F20286F2F73293A-
    82 00000346 2000               
    83                                  
    84 00000348 C2A1556E206F666963-         msgOficialRetirado      db "¡Un oficial ha sido retirado del juego! Se ha olvidado de atrapar a un soldado.", 0
    84 00000351 69616C206861207369-
    84 0000035A 646F20726574697261-
    84 00000363 646F2064656C206A75-
    84 0000036C 65676F212053652068-
    84 00000375 61206F6C7669646164-
    84 0000037E 6F2064652061747261-
    84 00000387 706172206120756E20-
    84 00000390 736F6C6461646F2E00 
    85                                  
    86 00000399 4F66696369616C2031-         msgOficial1             db "Oficial 1:", 0
    86 000003A2 3A00               
    87 000003A4 4F66696369616C2032-         msgOficial2             db "Oficial 2:", 0
    87 000003AD 3A00               
    88                                  
    89 000003AF 4D6F76696D69656E74-         msgCantMovimientos      db "Movimientos totales: %d", 0
    89 000003B8 6F7320746F74616C65-
    89 000003C1 733A20256400       
    90 000003C7 2D2048616369612061-         msgCantAdelante         db "- Hacia adelante: %d", 0
    90 000003D0 64656C616E74653A20-
    90 000003D9 256400             
    91 000003DC 2D204861636961206C-         msgCantDerecha          db "- Hacia la derecha: %d", 0
    91 000003E5 612064657265636861-
    91 000003EE 3A20256400         
    92 000003F3 2D204861636961206C-         msgCantIzquierda        db "- Hacia la izquierda: %d", 0
    92 000003FC 6120697A7175696572-
    92 00000405 64613A20256400     
    93 0000040C 2D2048616369612061-         msgCantAtras            db "- Hacia atrás: %d", 0
    93 00000415 7472C3A1733A202564-
    93 0000041E 00                 
    94 0000041F 2D20456E2064696167-         msgCantDiagonal         db "- En diagonal: %d", 0
    94 00000428 6F6E616C3A20256400 
    95                                  
    96 00000431 C2A1456C206A756567-         msgJuegoTerminado       db "¡El juego ha terminado!", 0
    96 0000043A 6F206861207465726D-
    96 00000443 696E61646F2100     
    97 0000044A C2A1456C2067616E61-         msgGanador              db "¡El ganador es el equipo de los %s!", 0
    97 00000453 646F7220657320656C-
    97 0000045C 2065717569706F2064-
    97 00000465 65206C6F7320257321-
    97 0000046E 00                 
    98 0000046F 52617AC3B36E3A2025-         msgRazonGanador         db "Razón: %s", 0
    98 00000478 7300               
    99                                  
   100 0000047A 6C6F7320736F6C6461-         msgSoldadosFortaleza    db "los soldados han ocupado todos los puntos de la fortaleza.", 0
   100 00000483 646F732068616E206F-
   100 0000048C 63757061646F20746F-
   100 00000495 646F73206C6F732070-
   100 0000049E 756E746F7320646520-
   100 000004A7 6C6120666F7274616C-
   100 000004B0 657A612E00         
   101 000004B5 6C6F7320736F6C6461-         msgSoldadosRodean       db "los soldados han rodeado a los oficiales.", 0
   101 000004BE 646F732068616E2072-
   101 000004C7 6F646561646F206120-
   101 000004D0 6C6F73206F66696369-
   101 000004D9 616C65732E00       
   102 000004DF 6E6F2071756564616E-         msgOficialesGanan       db "no quedan suficientes soldados para ocupar la fortaleza.", 0
   102 000004E8 20737566696369656E-
   102 000004F1 74657320736F6C6461-
   102 000004FA 646F73207061726120-
   102 00000503 6F6375706172206C61-
   102 0000050C 20666F7274616C657A-
   102 00000515 612E00             
   103                                  
   104                                  section .text
   105                                      global main
   106                                  
   107                                  main:
   108                                      puts tableroOrig
     2 00000000 48BF-               <1>  mov rdi, %1
     2 00000002 [0000000000000000]  <1>
     3 0000000A 4883EC08            <1>  sub rsp, 8
     4 0000000E E8(00000000)        <1>  call puts
     5 00000013 4883C408            <1>  add rsp, 8
   109                                      puts tableroInv
     2 00000017 48BF-               <1>  mov rdi, %1
     2 00000019 [7400000000000000]  <1>
     3 00000021 4883EC08            <1>  sub rsp, 8
     4 00000025 E8(00000000)        <1>  call puts
     5 0000002A 4883C408            <1>  add rsp, 8
   110                                      puts tableroIzq
     2 0000002E 48BF-               <1>  mov rdi, %1
     2 00000030 [E800000000000000]  <1>
     3 00000038 4883EC08            <1>  sub rsp, 8
     4 0000003C E8(00000000)        <1>  call puts
     5 00000041 4883C408            <1>  add rsp, 8
   111                                      puts tableroDer
     2 00000045 48BF-               <1>  mov rdi, %1
     2 00000047 [5C01000000000000]  <1>
     3 0000004F 4883EC08            <1>  sub rsp, 8
     4 00000053 E8(00000000)        <1>  call puts
     5 00000058 4883C408            <1>  add rsp, 8
   112                                  
   113 0000005C C3                          ret
   114                                  
   115                                          
