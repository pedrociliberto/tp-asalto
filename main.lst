     1                                  %macro mPuts 1
     2                                      mov rdi, %1
     3                                      sub rsp, 8
     4                                      call puts
     5                                      add rsp, 8
     6                                  %endmacro
     7                                  
     8                                  %macro mPrint 2
     9                                      mov rdi, %1
    10                                      mov rsi, %2
    11                                      sub rsp, 8
    12                                      call printf
    13                                      add rsp, 8
    14                                  %endmacro
    15                                  
    16                                  %macro mGets 1
    17                                      mov rdi, %1
    18                                      sub rsp, 8
    19                                      call gets
    20                                      add rsp, 8
    21                                  %endmacro
    22                                  
    23                                  extern puts, printf
    24                                  extern gets
    25                                  
    26                                  section .data
    27                                  
    28                                      ; Tableros y sus posibles estados
    29                                  
    30 00000000 202031323334353637-         tableroOrig         db " "," ","1","2","3","4","5","6","7"," ",10
    30 00000009 200A               
    31 0000000B 202020205F5F5F2020-                             db " "," "," "," ","_","_","_"," "," "," ",10 
    31 00000014 200A               
    32 00000016 3120207C5858587C20-                             db "1"," "," ","|","X","X","X","|"," "," ",10
    32 0000001F 200A               
    33 00000021 32205F7C5858587C5F-                             db "2"," ","_","|","X","X","X","|","_"," ",10
    33 0000002A 200A               
    34 0000002C 337C58585858585858-                             db "3","|","X","X","X","X","X","X","X","|",10 
    34 00000035 7C0A               
    35 00000037 347C58585858585858-                             db "4","|","X","X","X","X","X","X","X","|",10 
    35 00000040 7C0A               
    36 00000042 357C58582020205858-                             db "5","|","X","X"," "," "," ","X","X","|",10 
    36 0000004B 7C0A               
    37 0000004D 3620C2AF7C4F20207C-                             db "6"," ","¯","|","O"," "," ","|","¯"," ",10 
    37 00000056 C2AF200A           
    38 0000005A 3720207C20204F7C20-                             db "7"," "," ","|"," "," ","O","|"," "," ",10 
    38 00000063 200A               
    39 00000065 20202020C2AFC2AFC2-                             db " "," "," "," ","¯","¯","¯"," "," "," ",10,0
    39 0000006E AF2020200A00       
    40                                  
    41 00000074 202031323334353637-         tableroInv          db " "," ","1","2","3","4","5","6","7"," ",10
    41 0000007D 200A               
    42 0000007F 202020205F5F5F2020-                             db " "," "," "," ","_","_","_"," "," "," ",10 
    42 00000088 200A               
    43 0000008A 3120207C4F20207C20-                             db "1"," "," ","|","O"," "," ","|"," "," ",10
    43 00000093 200A               
    44 00000095 32205F7C20204F7C5F-                             db "2"," ","_","|"," "," ","O","|","_"," ",10
    44 0000009E 200A               
    45 000000A0 337C58582020205858-                             db "3","|","X","X"," "," "," ","X","X","|",10 
    45 000000A9 7C0A               
    46 000000AB 347C58585858585858-                             db "4","|","X","X","X","X","X","X","X","|",10 
    46 000000B4 7C0A               
    47 000000B6 357C58585858585858-                             db "5","|","X","X","X","X","X","X","X","|",10 
    47 000000BF 7C0A               
    48 000000C1 3620C2AF7C5858587C-                             db "6"," ","¯","|","X","X","X","|","¯"," ",10 
    48 000000CA C2AF200A           
    49 000000CE 3720207C5858587C20-                             db "7"," "," ","|","X","X","X","|"," "," ",10 
    49 000000D7 200A               
    50 000000D9 20202020C2AFC2AFC2-                             db " "," "," "," ","¯","¯","¯"," "," "," ",10,0
    50 000000E2 AF2020200A00       
    51                                  
    52 000000E8 202031323334353637-         tableroIzq          db " "," ","1","2","3","4","5","6","7"," ",10
    52 000000F1 200A               
    53 000000F3 202020205F5F5F2020-                             db " "," "," "," ","_","_","_"," "," "," ",10 
    53 000000FC 200A               
    54 000000FE 3120207C5858587C20-                             db "1"," "," ","|","X","X","X","|"," "," ",10
    54 00000107 200A               
    55 00000109 32205F7C5858587C5F-                             db "2"," ","_","|","X","X","X","|","_"," ",10
    55 00000112 200A               
    56 00000114 337C5858585820204F-                             db "3","|","X","X","X","X"," "," ","O","|",10 
    56 0000011D 7C0A               
    57 0000011F 347C58585858202020-                             db "4","|","X","X","X","X"," "," "," ","|",10 
    57 00000128 7C0A               
    58 0000012A 357C58585858204F20-                             db "5","|","X","X","X","X"," ","O"," ","|",10 
    58 00000133 7C0A               
    59 00000135 3620C2AF7C5858587C-                             db "6"," ","¯","|","X","X","X","|","¯"," ",10 
    59 0000013E C2AF200A           
    60 00000142 3720207C5858587C20-                             db "7"," "," ","|","X","X","X","|"," "," ",10 
    60 0000014B 200A               
    61 0000014D 20202020C2AFC2AFC2-                             db " "," "," "," ","¯","¯","¯"," "," "," ",10,0
    61 00000156 AF2020200A00       
    62                                  
    63 0000015C 202031323334353637-         tableroDer          db " "," ","1","2","3","4","5","6","7"," ",10
    63 00000165 200A               
    64 00000167 202020205F5F5F2020-                             db " "," "," "," ","_","_","_"," "," "," ",10 
    64 00000170 200A               
    65 00000172 3120207C5858587C20-                             db "1"," "," ","|","X","X","X","|"," "," ",10
    65 0000017B 200A               
    66 0000017D 32205F7C5858587C5F-                             db "2"," ","_","|","X","X","X","|","_"," ",10
    66 00000186 200A               
    67 00000188 337C4F202058585858-                             db "3","|","O"," "," ","X","X","X","X","|",10 
    67 00000191 7C0A               
    68 00000193 347C20202058585858-                             db "4","|"," "," "," ","X","X","X","X","|",10 
    68 0000019C 7C0A               
    69 0000019E 357C204F2058585858-                             db "5","|"," ","O"," ","X","X","X","X","|",10 
    69 000001A7 7C0A               
    70 000001A9 3620C2AF7C5858587C-                             db "6"," ","¯","|","X","X","X","|","¯"," ",10 
    70 000001B2 C2AF200A           
    71 000001B6 3720207C5858587C20-                             db "7"," "," ","|","X","X","X","|"," "," ",10 
    71 000001BF 200A               
    72 000001C1 20202020C2AFC2AFC2-                             db " "," "," "," ","¯","¯","¯"," "," "," ",10,0
    72 000001CA AF2020200A00       
    73                                  
    74                                      ; Mensajes
    75                                  
    76 000001D0 C2A14269656E76656E-         msgBienvenida           db "¡Bienvenido al juego El Asalto!", 0
    76 000001D9 69646F20616C206A75-
    76 000001E2 65676F20456C204173-
    76 000001EB 616C746F2100       
    77                                  
    78 000001F1 C2BF44657365612070-         msgPersonalizarTablero  db "¿Desea personalizar el tablero? (s/n): ", 0 
    78 000001FA 6572736F6E616C697A-
    78 00000203 617220656C20746162-
    78 0000020C 6C65726F3F2028732F-
    78 00000215 6E293A2000         
    79                                  
    80 0000021A 4F706369C3B36E2069-         msgOpcionInvalida       db "Opción inválida. Intente de nuevo.", 0
    80 00000223 6E76C3A16C6964612E-
    80 0000022C 20496E74656E746520-
    80 00000235 6465206E7565766F2E-
    80 0000023E 00                 
    81                                  
    82 0000023F C2A153652070756564-         msgPregRotacion         db "¡Se puede rotar el tablero! Elija una de las opciones (1-4):", 0
    82 00000248 6520726F7461722065-
    82 00000251 6C207461626C65726F-
    82 0000025A 2120456C696A612075-
    82 00000263 6E61206465206C6173-
    82 0000026C 206F7063696F6E6573-
    82 00000275 2028312D34293A00   
    83 0000027D 312E20526F74617220-         msgRotacionesPosibles   db "1. Rotar a la izquierda", 10
    83 00000286 61206C6120697A7175-
    83 0000028F 69657264610A       
    84 00000295 322E20526F74617220-                                 db "2. Rotar a la derecha", 10
    84 0000029E 61206C612064657265-
    84 000002A7 6368610A           
    85 000002AB 332E20496E76657274-                                 db "3. Invertir el tablero", 10
    85 000002B4 697220656C20746162-
    85 000002BD 6C65726F0A         
    86 000002C2 342E204E6F20726F74-                                 db "4. No rotar", 0
    86 000002CB 617200             
    87                                      
    88 000002CE C2A1456C696A616D6F-         msgPersonalizarSimb     db "¡Elijamos los símbolos para cada personaje!", 0
    88 000002D7 73206C6F732073C3AD-
    88 000002E0 6D626F6C6F73207061-
    88 000002E9 726120636164612070-
    88 000002F2 6572736F6E616A6521-
    88 000002FB 00                 
    89 000002FC 53C3AD6D626F6C6F20-         msgSimboloOficiales     db "Símbolo para los oficiales:", 0
    89 00000305 70617261206C6F7320-
    89 0000030E 6F66696369616C6573-
    89 00000317 3A00               
    90 00000319 53C3AD6D626F6C6F20-         msgSimboloSoldados      db "Símbolo para los soldados:", 0
    90 00000322 70617261206C6F7320-
    90 0000032B 736F6C6461646F733A-
    90 00000334 00                 
    91                                  
    92 00000335 C2BF517569C3A96E20-         msgQuienInicia          db "¿Quién inicia el juego: oficiales o soldados? (o/s): ", 0
    92 0000033E 696E6963696120656C-
    92 00000347 206A7565676F3A206F-
    92 00000350 66696369616C657320-
    92 00000359 6F20736F6C6461646F-
    92 00000362 733F20286F2F73293A-
    92 0000036B 2000               
    93                                  
    94 0000036D C2A1556E206F666963-         msgOficialRetirado      db "¡Un oficial ha sido retirado del juego! Se ha olvidado de atrapar a un soldado.", 0
    94 00000376 69616C206861207369-
    94 0000037F 646F20726574697261-
    94 00000388 646F2064656C206A75-
    94 00000391 65676F212053652068-
    94 0000039A 61206F6C7669646164-
    94 000003A3 6F2064652061747261-
    94 000003AC 706172206120756E20-
    94 000003B5 736F6C6461646F2E00 
    95                                  
    96 000003BE 4F66696369616C2031-         msgOficial1             db "Oficial 1:", 0
    96 000003C7 3A00               
    97 000003C9 4F66696369616C2032-         msgOficial2             db "Oficial 2:", 0
    97 000003D2 3A00               
    98                                  
    99 000003D4 4D6F76696D69656E74-         msgCantMovimientos      db "Movimientos totales: %d", 0
    99 000003DD 6F7320746F74616C65-
    99 000003E6 733A20256400       
   100 000003EC 2D2048616369612061-         msgCantAdelante         db "- Hacia adelante: %d", 0
   100 000003F5 64656C616E74653A20-
   100 000003FE 256400             
   101 00000401 2D204861636961206C-         msgCantDerecha          db "- Hacia la derecha: %d", 0
   101 0000040A 612064657265636861-
   101 00000413 3A20256400         
   102 00000418 2D204861636961206C-         msgCantIzquierda        db "- Hacia la izquierda: %d", 0
   102 00000421 6120697A7175696572-
   102 0000042A 64613A20256400     
   103 00000431 2D2048616369612061-         msgCantAtras            db "- Hacia atrás: %d", 0
   103 0000043A 7472C3A1733A202564-
   103 00000443 00                 
   104 00000444 2D20456E2064696167-         msgCantDiagonal         db "- En diagonal: %d", 0
   104 0000044D 6F6E616C3A20256400 
   105                                  
   106 00000456 C2A1456C206A756567-         msgJuegoTerminado       db "¡El juego ha terminado!", 0
   106 0000045F 6F206861207465726D-
   106 00000468 696E61646F2100     
   107 0000046F C2A1456C2067616E61-         msgGanador              db "¡El ganador es el equipo de los %s!", 10, 0
   107 00000478 646F7220657320656C-
   107 00000481 2065717569706F2064-
   107 0000048A 65206C6F7320257321-
   107 00000493 0A00               
   108 00000495 736F6C6461646F7300          stringSoldados          db "soldados", 0
   109 0000049E 6F66696369616C6573-         stringOficiales         db "oficiales", 0
   109 000004A7 00                 
   110                                  
   111 000004A8 52617AC3B36E3A2025-         msgRazonGanador         db "Razón: %s", 0
   111 000004B1 7300               
   112                                  
   113                                      ; Se ha decidido salir de la partida
   114 000004B3 536520686120646563-         msgSalidaPartida        db "Se ha decidido salir de la partida. ¿Desea guardarla? (y/n)", 0
   114 000004BC 696469646F2073616C-
   114 000004C5 6972206465206C6120-
   114 000004CE 706172746964612E20-
   114 000004D7 C2BF44657365612067-
   114 000004E0 7561726461726C613F-
   114 000004E9 2028792F6E2900     
   115 000004F0 6E                          guardadoPartida         db 'n' ; guardar (y), no guardar (n)
   116                                  
   117                                      ; Razones de victoria de soldados
   118 000004F1 6C6F7320736F6C6461-         msgSoldadosFortaleza    db "los soldados han ocupado todos los puntos de la fortaleza.", 0
   118 000004FA 646F732068616E206F-
   118 00000503 63757061646F20746F-
   118 0000050C 646F73206C6F732070-
   118 00000515 756E746F7320646520-
   118 0000051E 6C6120666F7274616C-
   118 00000527 657A612E00         
   119 0000052C 6C6F7320736F6C6461-         msgSoldadosRodean       db "los soldados han rodeado a los oficiales.", 0
   119 00000535 646F732068616E2072-
   119 0000053E 6F646561646F206120-
   119 00000547 6C6F73206F66696369-
   119 00000550 616C65732E00       
   120 00000556 616D626F73206F6669-         msgSoldadosInvalidar    db "ambos oficiales han sido invalidados."
   120 0000055F 6369616C6573206861-
   120 00000568 6E207369646F20696E-
   120 00000571 76616C696461646F73-
   120 0000057A 2E                 
   121                                  
   122                                      ; Razones de victoria de oficiales
   123 0000057B 6E6F2071756564616E-         msgOficialesGanan       db "no quedan suficientes soldados para ocupar la fortaleza.", 0
   123 00000584 20737566696369656E-
   123 0000058D 74657320736F6C6461-
   123 00000596 646F73207061726120-
   123 0000059F 6F6375706172206C61-
   123 000005A8 20666F7274616C657A-
   123 000005B1 612E00             
   124                                  
   125                                      ; Casillas/movimientos inválidos
   126 000005B4 436173696C6C612069-         msgCasillaVaciaSold     db "Casilla inválida: no hay un soldado en esa casilla.", 0
   126 000005BD 6E76C3A16C6964613A-
   126 000005C6 206E6F206861792075-
   126 000005CF 6E20736F6C6461646F-
   126 000005D8 20656E206573612063-
   126 000005E1 6173696C6C612E00   
   127 000005E9 436173696C6C612069-         msgCasillaVaciaOfic     db "Casilla inválida: no hay un oficial en esa casilla.", 0
   127 000005F2 6E76C3A16C6964613A-
   127 000005FB 206E6F206861792075-
   127 00000604 6E206F66696369616C-
   127 0000060D 20656E206573612063-
   127 00000616 6173696C6C612E00   
   128 0000061E 4D6F76696D69656E74-         msgMovInvalidoSold      db "Movimiento inválido: no es posible mover el soldado a esa casilla.",0
   128 00000627 6F20696E76C3A16C69-
   128 00000630 646F3A206E6F206573-
   128 00000639 20706F7369626C6520-
   128 00000642 6D6F76657220656C20-
   128 0000064B 736F6C6461646F2061-
   128 00000654 206573612063617369-
   128 0000065D 6C6C612E00         
   129 00000662 4D6F76696D69656E74-         msgMovInvalidoOfic      db "Movimiento inválido: no es posible mover el oficial a esa casilla.",0
   129 0000066B 6F20696E76C3A16C69-
   129 00000674 646F3A206E6F206573-
   129 0000067D 20706F7369626C6520-
   129 00000686 6D6F76657220656C20-
   129 0000068F 6F66696369616C2061-
   129 00000698 206573612063617369-
   129 000006A1 6C6C612E00         
   130                                  
   131                                      ; Turnos
   132 000006A6 4573207475726E6F20-         msgTurnoSoldados        db "Es turno de los soldados. Decida a qué soldado desea mover: (F C)", 0
   132 000006AF 6465206C6F7320736F-
   132 000006B8 6C6461646F732E2044-
   132 000006C1 656369646120612071-
   132 000006CA 75C3A920736F6C6461-
   132 000006D3 646F20646573656120-
   132 000006DC 6D6F7665723A202846-
   132 000006E5 20432900           
   133 000006E9 4573207475726E6F20-         msgTurnoOficiales       db "Es turno de los oficiales. Decida a qué oficial desea mover: (F C)", 0
   133 000006F2 6465206C6F73206F66-
   133 000006FB 696369616C65732E20-
   133 00000704 446563696461206120-
   133 0000070D 7175C3A9206F666963-
   133 00000716 69616C206465736561-
   133 0000071F 206D6F7665723A2028-
   133 00000728 4620432900         
   134 0000072D C2BF41207175C3A920-         msgTurnoMovSold         db "¿A qué casilla desea mover el soldado? (F C)", 0
   134 00000736 636173696C6C612064-
   134 0000073F 65736561206D6F7665-
   134 00000748 7220656C20736F6C64-
   134 00000751 61646F3F2028462043-
   134 0000075A 2900               
   135 0000075C C2BF41207175C3A920-         msgTurnoMovOfic         db "¿A qué casilla desea mover el oficial? (F C)", 0
   135 00000765 636173696C6C612064-
   135 0000076E 65736561206D6F7665-
   135 00000777 7220656C206F666963-
   135 00000780 69616C3F2028462043-
   135 00000789 2900               
   136                                  
   137 0000078B 556E206F6669636961-         msgCapturaSold          db "Un oficial ha capturado a un soldado.", 0
   137 00000794 6C2068612063617074-
   137 0000079D 757261646F20612075-
   137 000007A6 6E20736F6C6461646F-
   137 000007AF 2E00               
   138 000007B1 C2A1556E206F666963-         msgInvalidOfic          db "¡Un oficial ha sido invalidado! No ha capturado a un soldado regalado.", 0
   138 000007BA 69616C206861207369-
   138 000007C3 646F20696E76616C69-
   138 000007CC 6461646F21204E6F20-
   138 000007D5 686120636170747572-
   138 000007DE 61646F206120756E20-
   138 000007E7 736F6C6461646F2072-
   138 000007F0 6567616C61646F2E00 
   139                                      
   140                                      ; Contadores
   141                                  
   142 000007F9 00                          movimientosOfic1        db 0
   143 000007FA 00                          movimientosOfic2        db 0
   144                                      
   145 000007FB 00                          movOfic1Adelante        db 0
   146 000007FC 00                          movOfic1Derecha         db 0
   147 000007FD 00                          movOfic1Izquierda       db 0
   148 000007FE 00                          movOfic1Atras           db 0
   149 000007FF 00                          movOfic1Diagonal        db 0
   150                                  
   151 00000800 00                          movOfic2Adelante        db 0
   152 00000801 00                          movOfic2Derecha         db 0
   153 00000802 00                          movOfic2Izquierda       db 0
   154 00000803 00                          movOfic2Atras           db 0
   155 00000804 00                          movOfic2Diagonal        db 0
   156                                  
   157 00000805 00                          cantSoldCapturados      db 0
   158 00000806 00                          cantOficInvalidados     db 0
   159                                  
   160 00000807 4F00                        simboloOficiales        db 'O', 0
   161 00000809 5800                        simboloSoldados         db 'X', 0
   162 0000080B 04                          orientacionTablero      db 4    ; 4 -> no rotar (default) 
   163 0000080C 73                          piezaDeInicio           db 's'  ; soldados (s), oficiales (o)
   164                                  
   165                                  
   166                                  section .bss
   167                                  
   168 00000000 ????????                    eleccionRotar       resd 1
   169 00000004 ????????                    rotacionElegida     resd 1
   170                                  
   171 00000008 ????????                    simbOficElegido     resd 1  ; Variable pivote para el símbolo de los oficiales
   172 0000000C ????????                    simbSoldElegido     resd 1  ; Variable pivote para el símbolo de los soldados
   173                                  
   174 00000010 ????????                    piezaIniElegida     resd 1
   175                                  
   176 00000014 ????????????????            casillaMovSold      resd 2 ; Fila y columna de la casilla a mover
   177 0000001C ????????????????            casillaMovOfic      resd 2 ; Fila y columna de la casilla a mover
   178                                  
   179 00000024 <res 80h>                   tableroEnJuego      resb 128
   180                                  
   181                                  section .text
   182                                      global main
   183                                  
   184                                  main:
   185                                      
   186                                      mPuts msgBienvenida
     2 00000000 48BF-               <1>  mov rdi, %1
     2 00000002 [D001000000000000]  <1>
     3 0000000A 4883EC08            <1>  sub rsp, 8
     4 0000000E E8(00000000)        <1>  call puts
     5 00000013 4883C408            <1>  add rsp, 8
   187                                  
   188                                      personalizar:
   189 00000017 C70425[00000000]00-             mov dword[eleccionRotar], ''    ; vaciar variable
   189 0000001F 000000             
   190                                          mPuts msgPersonalizarTablero
     2 00000022 48BF-               <1>  mov rdi, %1
     2 00000024 [F101000000000000]  <1>
     3 0000002C 4883EC08            <1>  sub rsp, 8
     4 00000030 E8(00000000)        <1>  call puts
     5 00000035 4883C408            <1>  add rsp, 8
   191                                          mGets eleccionRotar
    17 00000039 48BF-               <1>  mov rdi, %1
    17 0000003B [0000000000000000]  <1>
    18 00000043 4883EC08            <1>  sub rsp, 8
    19 00000047 E8(00000000)        <1>  call gets
    20 0000004C 4883C408            <1>  add rsp, 8
   192                                  
   193 00000050 833C25[00000000]6E              cmp dword[eleccionRotar], 'n' 
   194 00000058 0F844E010000                    je comenzarPartida
   195 0000005E 833C25[00000000]73              cmp dword[eleccionRotar], 's'
   196 00000066 7419                            je personalizarRotacion
   197                                  
   198                                          mPuts msgOpcionInvalida
     2 00000068 48BF-               <1>  mov rdi, %1
     2 0000006A [1A02000000000000]  <1>
     3 00000072 4883EC08            <1>  sub rsp, 8
     4 00000076 E8(00000000)        <1>  call puts
     5 0000007B 4883C408            <1>  add rsp, 8
   199 0000007F EB96                            jmp personalizar
   200                                  
   201                                      personalizarRotacion:
   202                                          mPuts msgPregRotacion
     2 00000081 48BF-               <1>  mov rdi, %1
     2 00000083 [3F02000000000000]  <1>
     3 0000008B 4883EC08            <1>  sub rsp, 8
     4 0000008F E8(00000000)        <1>  call puts
     5 00000094 4883C408            <1>  add rsp, 8
   203                                          mPuts msgRotacionesPosibles
     2 00000098 48BF-               <1>  mov rdi, %1
     2 0000009A [7D02000000000000]  <1>
     3 000000A2 4883EC08            <1>  sub rsp, 8
     4 000000A6 E8(00000000)        <1>  call puts
     5 000000AB 4883C408            <1>  add rsp, 8
   204                                  
   205 000000AF C70425[04000000]00-             mov dword[rotacionElegida], '' ; limpiar variable
   205 000000B7 000000             
   206                                          mGets rotacionElegida
    17 000000BA 48BF-               <1>  mov rdi, %1
    17 000000BC [0400000000000000]  <1>
    18 000000C4 4883EC08            <1>  sub rsp, 8
    19 000000C8 E8(00000000)        <1>  call gets
    20 000000CD 4883C408            <1>  add rsp, 8
   207                                  
   208                                          ; cmp dword[rotacionElegida], 1 ; rotar antes de símbolos
   209                                          ; je rotar1
   210                                          ; cmp dword[rotacionElegida], 2 ; rotar antes de símbolos
   211                                          ; je rotar2
   212                                          ; cmp dword[rotacionElegida], 3 ; rotar antes de símbolos
   213                                          ; je rotar3
   214 000000D1 833C25[04000000]34              cmp dword[rotacionElegida], '4' ; no rotar
   215 000000D9 7419                            je personalizarSimbolos
   216                                  
   217                                          mPuts msgOpcionInvalida
     2 000000DB 48BF-               <1>  mov rdi, %1
     2 000000DD [1A02000000000000]  <1>
     3 000000E5 4883EC08            <1>  sub rsp, 8
     4 000000E9 E8(00000000)        <1>  call puts
     5 000000EE 4883C408            <1>  add rsp, 8
   218 000000F2 EB8D                            jmp personalizarRotacion
   219                                  
   220                                      personalizarSimbolos:
   221                                          mPuts msgPersonalizarSimb
     2 000000F4 48BF-               <1>  mov rdi, %1
     2 000000F6 [CE02000000000000]  <1>
     3 000000FE 4883EC08            <1>  sub rsp, 8
     4 00000102 E8(00000000)        <1>  call puts
     5 00000107 4883C408            <1>  add rsp, 8
   222                                  
   223 0000010B E8BE010000                      call setearSimbSoldados
   224 00000110 E848020000                      call setearSimbOficiales
   225                                          
   226                                      personalizarQuienInicia:
   227 00000115 C70425[10000000]00-             mov dword[piezaIniElegida], ''    ; vaciar variable
   227 0000011D 000000             
   228                                          mPuts msgQuienInicia
     2 00000120 48BF-               <1>  mov rdi, %1
     2 00000122 [3503000000000000]  <1>
     3 0000012A 4883EC08            <1>  sub rsp, 8
     4 0000012E E8(00000000)        <1>  call puts
     5 00000133 4883C408            <1>  add rsp, 8
   229                                          mGets piezaIniElegida
    17 00000137 48BF-               <1>  mov rdi, %1
    17 00000139 [1000000000000000]  <1>
    18 00000141 4883EC08            <1>  sub rsp, 8
    19 00000145 E8(00000000)        <1>  call gets
    20 0000014A 4883C408            <1>  add rsp, 8
   230                                  
   231 0000014E 833C25[10000000]6F              cmp dword[piezaIniElegida], 'o' 
   232 00000156 7423                            je setearPiezaInicio
   233 00000158 833C25[10000000]73              cmp dword[piezaIniElegida], 's'
   234 00000160 7419                            je setearPiezaInicio
   235                                  
   236                                          mPuts msgOpcionInvalida
     2 00000162 48BF-               <1>  mov rdi, %1
     2 00000164 [1A02000000000000]  <1>
     3 0000016C 4883EC08            <1>  sub rsp, 8
     4 00000170 E8(00000000)        <1>  call puts
     5 00000175 4883C408            <1>  add rsp, 8
   237 00000179 EB9A                            jmp personalizarQuienInicia
   238                                  
   239                                          setearPiezaInicio:
   240 0000017B B901000000                          mov rcx, 1
   241 00000180 488D3425[10000000]                  lea rsi, [piezaIniElegida]
   242 00000188 488D3C25[0C080000]                  lea rdi, [piezaDeInicio]
   243 00000190 F3A4                                rep movsb
   244                                  
   245                                              mPuts piezaDeInicio
     2 00000192 48BF-               <1>  mov rdi, %1
     2 00000194 [0C08000000000000]  <1>
     3 0000019C 4883EC08            <1>  sub rsp, 8
     4 000001A0 E8(00000000)        <1>  call puts
     5 000001A5 4883C408            <1>  add rsp, 8
   246 000001A9 EB01                                jmp comenzarPartida
   247                                      
   248 000001AB C3                          ret
   249                                  
   250                                  comenzarPartida:
   251                                      ; Se debe mostrar el tablero (en la orientacion indicada y con los simbolos indicados), 
   252                                      ; y se debe mostrar el mensaje de turno en base a lo que haya personalizado el usuario.
   253 000001AC 803C25[0C080000]73              cmp byte[piezaDeInicio], 's'
   254 000001B4 740E                            je turnoSoldados
   255 000001B6 803C25[0C080000]6F              cmp byte[piezaDeInicio], 'o'
   256 000001BE 0F8482000000                    je turnoOficiales
   257                                  
   258                                  loopMovimientos:; mostrarTablero, mostrarTurno, realizarMovimiento, verificarFinJuego
   259                                      turnoSoldados:
   260                                          mPuts tableroEnJuego ; Muestro el tablero
     2 000001C4 48BF-               <1>  mov rdi, %1
     2 000001C6 [2400000000000000]  <1>
     3 000001CE 4883EC08            <1>  sub rsp, 8
     4 000001D2 E8(00000000)        <1>  call puts
     5 000001D7 4883C408            <1>  add rsp, 8
   261                                  
   262                                          mPuts msgTurnoSoldados ; Muestro el mensaje de seleccionar ficha a mover
     2 000001DB 48BF-               <1>  mov rdi, %1
     2 000001DD [A606000000000000]  <1>
     3 000001E5 4883EC08            <1>  sub rsp, 8
     4 000001E9 E8(00000000)        <1>  call puts
     5 000001EE 4883C408            <1>  add rsp, 8
   263                                          mGets casillaMovSold ; Obtengo la ficha a mover
    17 000001F2 48BF-               <1>  mov rdi, %1
    17 000001F4 [1400000000000000]  <1>
    18 000001FC 4883EC08            <1>  sub rsp, 8
    19 00000200 E8(00000000)        <1>  call gets
    20 00000205 4883C408            <1>  add rsp, 8
   264 00000209 E8DE010000                      call verificarFichaSold ; verificar si la ficha elegida es valida
   265                                  
   266                                          mPuts msgTurnoMovSold ; Muestro el mensaje de seleccionar casilla a mover
     2 0000020E 48BF-               <1>  mov rdi, %1
     2 00000210 [2D07000000000000]  <1>
     3 00000218 4883EC08            <1>  sub rsp, 8
     4 0000021C E8(00000000)        <1>  call puts
     5 00000221 4883C408            <1>  add rsp, 8
   267                                          mGets casillaMovSold ; Obtengo la casilla a mover
    17 00000225 48BF-               <1>  mov rdi, %1
    17 00000227 [1400000000000000]  <1>
    18 0000022F 4883EC08            <1>  sub rsp, 8
    19 00000233 E8(00000000)        <1>  call gets
    20 00000238 4883C408            <1>  add rsp, 8
   268 0000023C E8AD010000                      call verificarMovimientoSold ; verificar si el movimiento es valido
   269                                  
   270 00000241 E8AA010000                      call realizarMovimiento ; Realizo el movimiento
   271                                          
   272                                      turnoOficiales:
   273                                          mPuts tableroEnJuego ; Muestro el tablero
     2 00000246 48BF-               <1>  mov rdi, %1
     2 00000248 [2400000000000000]  <1>
     3 00000250 4883EC08            <1>  sub rsp, 8
     4 00000254 E8(00000000)        <1>  call puts
     5 00000259 4883C408            <1>  add rsp, 8
   274                                  
   275                                          mPuts msgTurnoOficiales ; Muestro el mensaje de seleccionar ficha a mover
     2 0000025D 48BF-               <1>  mov rdi, %1
     2 0000025F [E906000000000000]  <1>
     3 00000267 4883EC08            <1>  sub rsp, 8
     4 0000026B E8(00000000)        <1>  call puts
     5 00000270 4883C408            <1>  add rsp, 8
   276                                          mGets casillaMovOfic ; Obtengo la ficha a mover
    17 00000274 48BF-               <1>  mov rdi, %1
    17 00000276 [1C00000000000000]  <1>
    18 0000027E 4883EC08            <1>  sub rsp, 8
    19 00000282 E8(00000000)        <1>  call gets
    20 00000287 4883C408            <1>  add rsp, 8
   277 0000028B E85D010000                      call verificarFichaOfic ; verificar si la ficha elegida es valida
   278                                  
   279                                          mPuts msgTurnoMovSold ; Muestro el mensaje de seleccionar casilla a mover
     2 00000290 48BF-               <1>  mov rdi, %1
     2 00000292 [2D07000000000000]  <1>
     3 0000029A 4883EC08            <1>  sub rsp, 8
     4 0000029E E8(00000000)        <1>  call puts
     5 000002A3 4883C408            <1>  add rsp, 8
   280                                          mGets casillaMovSold ; Obtengo la casilla a mover
    17 000002A7 48BF-               <1>  mov rdi, %1
    17 000002A9 [1400000000000000]  <1>
    18 000002B1 4883EC08            <1>  sub rsp, 8
    19 000002B5 E8(00000000)        <1>  call gets
    20 000002BA 4883C408            <1>  add rsp, 8
   281 000002BE E82C010000                      call verificarMovimientoOfic ; verificar si el movimiento es valido
   282                                  
   283 000002C3 E828010000                      call realizarMovimiento ; Realizo el movimiento
   284                                  
   285                                          ; Repetir en loop
   286 000002C8 E9F7FEFFFF                      jmp loopMovimientos
   287                                  
   288 000002CD C3                          ret
   289                                  
   290                                  
   291                                  
   292                                  
   293                                  
   294                                  setearSimbSoldados:
   295                                      mPuts msgSimboloSoldados
     2 000002CE 48BF-               <1>  mov rdi, %1
     2 000002D0 [1903000000000000]  <1>
     3 000002D8 4883EC08            <1>  sub rsp, 8
     4 000002DC E8(00000000)        <1>  call puts
     5 000002E1 4883C408            <1>  add rsp, 8
   296 000002E5 C70425[0C000000]00-         mov dword[simbSoldElegido], ''
   296 000002ED 000000             
   297                                      mGets simbSoldElegido
    17 000002F0 48BF-               <1>  mov rdi, %1
    17 000002F2 [0C00000000000000]  <1>
    18 000002FA 4883EC08            <1>  sub rsp, 8
    19 000002FE E8(00000000)        <1>  call gets
    20 00000303 4883C408            <1>  add rsp, 8
   298                                  
   299 00000307 803C25[0C000000]20          cmp byte[simbSoldElegido], ' '
   300 0000030F 7430                        je errSeteoSoldado
   301 00000311 803C25[0C000000]00          cmp byte[simbSoldElegido], ''
   302 00000319 7426                        je errSeteoSoldado
   303                                  
   304 0000031B 8A0425[0C000000]            mov al, byte[simbSoldElegido]
   305 00000322 880425[09080000]            mov byte[simboloSoldados], al
   306                                  
   307                                      mPuts simboloSoldados
     2 00000329 48BF-               <1>  mov rdi, %1
     2 0000032B [0908000000000000]  <1>
     3 00000333 4883EC08            <1>  sub rsp, 8
     4 00000337 E8(00000000)        <1>  call puts
     5 0000033C 4883C408            <1>  add rsp, 8
   308 00000340 C3                          ret
   309                                  
   310                                      errSeteoSoldado:
   311                                          mPuts msgOpcionInvalida
     2 00000341 48BF-               <1>  mov rdi, %1
     2 00000343 [1A02000000000000]  <1>
     3 0000034B 4883EC08            <1>  sub rsp, 8
     4 0000034F E8(00000000)        <1>  call puts
     5 00000354 4883C408            <1>  add rsp, 8
   312 00000358 E971FFFFFF                      jmp setearSimbSoldados
   313                                  
   314                                  
   315                                  setearSimbOficiales:
   316                                      mPuts msgSimboloOficiales
     2 0000035D 48BF-               <1>  mov rdi, %1
     2 0000035F [FC02000000000000]  <1>
     3 00000367 4883EC08            <1>  sub rsp, 8
     4 0000036B E8(00000000)        <1>  call puts
     5 00000370 4883C408            <1>  add rsp, 8
   317 00000374 C70425[08000000]00-         mov dword[simbOficElegido], ''
   317 0000037C 000000             
   318                                      mGets simbOficElegido
    17 0000037F 48BF-               <1>  mov rdi, %1
    17 00000381 [0800000000000000]  <1>
    18 00000389 4883EC08            <1>  sub rsp, 8
    19 0000038D E8(00000000)        <1>  call gets
    20 00000392 4883C408            <1>  add rsp, 8
   319                                  
   320 00000396 803C25[08000000]20          cmp byte[simbOficElegido], ' '
   321 0000039E 7430                        je errSeteoOficial
   322 000003A0 803C25[08000000]00          cmp byte[simbOficElegido], ''
   323 000003A8 7426                        je errSeteoOficial
   324                                  
   325 000003AA 8A0425[08000000]            mov al, byte[simbOficElegido]
   326 000003B1 880425[07080000]            mov byte[simboloOficiales], al
   327                                  
   328                                      mPuts simboloOficiales
     2 000003B8 48BF-               <1>  mov rdi, %1
     2 000003BA [0708000000000000]  <1>
     3 000003C2 4883EC08            <1>  sub rsp, 8
     4 000003C6 E8(00000000)        <1>  call puts
     5 000003CB 4883C408            <1>  add rsp, 8
   329 000003CF C3                          ret
   330                                  
   331                                      errSeteoOficial:
   332                                          mPuts msgOpcionInvalida
     2 000003D0 48BF-               <1>  mov rdi, %1
     2 000003D2 [1A02000000000000]  <1>
     3 000003DA 4883EC08            <1>  sub rsp, 8
     4 000003DE E8(00000000)        <1>  call puts
     5 000003E3 4883C408            <1>  add rsp, 8
   333 000003E7 E971FFFFFF                      jmp setearSimbOficiales
   334                                  
   335                                  
   336                                  verificarFichaSold:
   337 000003EC C3                          ret
   338                                  
   339                                  verificarFichaOfic:
   340 000003ED C3                          ret
   341                                  
   342                                  verificarMovimientoSold:
   343 000003EE C3                          ret
   344                                  
   345                                  verificarMovimientoOfic:
   346 000003EF C3                          ret
   347                                  
   348                                  realizarMovimiento:
   349 000003F0 C3                          ret
   350                                  
