     1                                  %macro mPuts 1 ; Imprime el string %1, hasta encontrar un 0
     2                                      mov rdi, %1
     3                                      sub rsp, 8
     4                                      call puts
     5                                      add rsp, 8
     6                                  %endmacro
     7                                  
     8                                  %macro mPrint 2 ; Imprime el string %2 con formato %1
     9                                      mov rdi, %1
    10                                      mov rsi, %2
    11                                      sub rsp, 8
    12                                      call printf
    13                                      add rsp, 8
    14                                  %endmacro
    15                                  
    16                                  %macro mGets 1 ; Obtiene un string por teclado, guardándolo en %1
    17                                      mov rdi, %1
    18                                      sub rsp, 8
    19                                      call gets
    20                                      add rsp, 8
    21                                  %endmacro
    22                                  
    23                                  %macro mCommand 1 ; Ejecuta el comando %1 de la terminal
    24                                      mov rdi, %1
    25                                      sub rsp, 8
    26                                      call system
    27                                      add rsp, 8
    28                                  %endmacro
    29                                  
    30                                  %macro mMov 3 ; Copia %3 bytes del campo de memoria %2 al campo de memoria %1
    31                                      mov rcx, %3
    32                                      lea rsi, [%2]
    33                                      lea rdi, [%1]
    34                                      rep movsb
    35                                  %endmacro
    36                                  
    37                                  %macro mErrorJump 2 ; Imprime el mensaje de error %1 y salta a la etiqueta %2
    38                                      mPuts %1
    39                                      jmp %2
    40                                  %endmacro
    41                                  
    42                                  
    43                                  
    44                                  extern puts, printf
    45                                  extern gets
    46                                  extern system
    47                                  
    48                                  section .data
    49                                  
    50                                      ; Tableros y sus posibles estados
    51                                  
    52 00000000 202031323334353637-         tableroOrig         db " "," ","1","2","3","4","5","6","7"," ",10
    52 00000009 200A               
    53 0000000B 202020205F5F5F2020-                             db " "," "," "," ","_","_","_"," "," "," ",10 
    53 00000014 200A               
    54 00000016 3120207C5858587C20-                             db "1"," "," ","|","X","X","X","|"," "," ",10
    54 0000001F 200A               
    55 00000021 32205F7C5858587C5F-                             db "2"," ","_","|","X","X","X","|","_"," ",10
    55 0000002A 200A               
    56 0000002C 337C58585858585858-                             db "3","|","X","X","X","X","X","X","X","|",10 
    56 00000035 7C0A               
    57 00000037 347C58585858585858-                             db "4","|","X","X","X","X","X","X","X","|",10 
    57 00000040 7C0A               
    58 00000042 357C58582020205858-                             db "5","|","X","X"," "," "," ","X","X","|",10 
    58 0000004B 7C0A               
    59 0000004D 3620C2AF7C4F20207C-                             db "6"," ","¯","|","O"," "," ","|","¯"," ",10 
    59 00000056 C2AF200A           
    60 0000005A 3720207C20204F7C20-                             db "7"," "," ","|"," "," ","O","|"," "," ",10 
    60 00000063 200A               
    61 00000065 20202020C2AFC2AFC2-                             db " "," "," "," ","¯","¯","¯"," "," "," ",10,0
    61 0000006E AF2020200A00       
    62                                  
    63 00000074 202031323334353637-         tableroInv          db " "," ","1","2","3","4","5","6","7"," ",10
    63 0000007D 200A               
    64 0000007F 202020205F5F5F2020-                             db " "," "," "," ","_","_","_"," "," "," ",10 
    64 00000088 200A               
    65 0000008A 3120207C4F20207C20-                             db "1"," "," ","|","O"," "," ","|"," "," ",10
    65 00000093 200A               
    66 00000095 32205F7C20204F7C5F-                             db "2"," ","_","|"," "," ","O","|","_"," ",10
    66 0000009E 200A               
    67 000000A0 337C58582020205858-                             db "3","|","X","X"," "," "," ","X","X","|",10 
    67 000000A9 7C0A               
    68 000000AB 347C58585858585858-                             db "4","|","X","X","X","X","X","X","X","|",10 
    68 000000B4 7C0A               
    69 000000B6 357C58585858585858-                             db "5","|","X","X","X","X","X","X","X","|",10 
    69 000000BF 7C0A               
    70 000000C1 3620C2AF7C5858587C-                             db "6"," ","¯","|","X","X","X","|","¯"," ",10 
    70 000000CA C2AF200A           
    71 000000CE 3720207C5858587C20-                             db "7"," "," ","|","X","X","X","|"," "," ",10 
    71 000000D7 200A               
    72 000000D9 20202020C2AFC2AFC2-                             db " "," "," "," ","¯","¯","¯"," "," "," ",10,0
    72 000000E2 AF2020200A00       
    73                                  
    74 000000E8 202031323334353637-         tableroDer          db " "," ","1","2","3","4","5","6","7"," ",10
    74 000000F1 200A               
    75 000000F3 202020205F5F5F2020-                             db " "," "," "," ","_","_","_"," "," "," ",10 
    75 000000FC 200A               
    76 000000FE 3120207C5858587C20-                             db "1"," "," ","|","X","X","X","|"," "," ",10
    76 00000107 200A               
    77 00000109 32205F7C5858587C5F-                             db "2"," ","_","|","X","X","X","|","_"," ",10
    77 00000112 200A               
    78 00000114 337C5858585820204F-                             db "3","|","X","X","X","X"," "," ","O","|",10 
    78 0000011D 7C0A               
    79 0000011F 347C58585858202020-                             db "4","|","X","X","X","X"," "," "," ","|",10 
    79 00000128 7C0A               
    80 0000012A 357C58585858204F20-                             db "5","|","X","X","X","X"," ","O"," ","|",10 
    80 00000133 7C0A               
    81 00000135 3620C2AF7C5858587C-                             db "6"," ","¯","|","X","X","X","|","¯"," ",10 
    81 0000013E C2AF200A           
    82 00000142 3720207C5858587C20-                             db "7"," "," ","|","X","X","X","|"," "," ",10 
    82 0000014B 200A               
    83 0000014D 20202020C2AFC2AFC2-                             db " "," "," "," ","¯","¯","¯"," "," "," ",10,0
    83 00000156 AF2020200A00       
    84                                  
    85 0000015C 202031323334353637-         tableroIzq          db " "," ","1","2","3","4","5","6","7"," ",10
    85 00000165 200A               
    86 00000167 202020205F5F5F2020-                             db " "," "," "," ","_","_","_"," "," "," ",10 
    86 00000170 200A               
    87 00000172 3120207C5858587C20-                             db "1"," "," ","|","X","X","X","|"," "," ",10
    87 0000017B 200A               
    88 0000017D 32205F7C5858587C5F-                             db "2"," ","_","|","X","X","X","|","_"," ",10
    88 00000186 200A               
    89 00000188 337C4F202058585858-                             db "3","|","O"," "," ","X","X","X","X","|",10 
    89 00000191 7C0A               
    90 00000193 347C20202058585858-                             db "4","|"," "," "," ","X","X","X","X","|",10 
    90 0000019C 7C0A               
    91 0000019E 357C204F2058585858-                             db "5","|"," ","O"," ","X","X","X","X","|",10 
    91 000001A7 7C0A               
    92 000001A9 3620C2AF7C5858587C-                             db "6"," ","¯","|","X","X","X","|","¯"," ",10 
    92 000001B2 C2AF200A           
    93 000001B6 3720207C5858587C20-                             db "7"," "," ","|","X","X","X","|"," "," ",10 
    93 000001BF 200A               
    94 000001C1 20202020C2AFC2AFC2-                             db " "," "," "," ","¯","¯","¯"," "," "," ",10,0
    94 000001CA AF2020200A00       
    95                                  
    96                                      ; Mensajes
    97                                  
    98 000001D0 C2A14269656E76656E-         msgBienvenida           db "¡Bienvenido al juego El Asalto!", 0
    98 000001D9 69646F20616C206A75-
    98 000001E2 65676F20456C204173-
    98 000001EB 616C746F2100       
    99                                  
   100 000001F1 C2BF44657365612070-         msgPersonalizarTablero  db "¿Desea personalizar el tablero? (s/n): ", 0 
   100 000001FA 6572736F6E616C697A-
   100 00000203 617220656C20746162-
   100 0000020C 6C65726F3F2028732F-
   100 00000215 6E293A2000         
   101                                  
   102 0000021A 4F706369C3B36E2069-         msgOpcionInvalida       db "Opción inválida. Intente de nuevo.", 0
   102 00000223 6E76C3A16C6964612E-
   102 0000022C 20496E74656E746520-
   102 00000235 6465206E7565766F2E-
   102 0000023E 00                 
   103                                  
   104 0000023F C2A153652070756564-         msgPregRotacion         db "¡Se puede rotar el tablero! Elija una de las opciones (1-4):", 0
   104 00000248 6520726F7461722065-
   104 00000251 6C207461626C65726F-
   104 0000025A 2120456C696A612075-
   104 00000263 6E61206465206C6173-
   104 0000026C 206F7063696F6E6573-
   104 00000275 2028312D34293A00   
   105 0000027D 312E20526F74617220-         msgRotacionesPosibles   db "1. Rotar a la izquierda", 10
   105 00000286 61206C6120697A7175-
   105 0000028F 69657264610A       
   106 00000295 322E20526F74617220-                                 db "2. Rotar a la derecha", 10
   106 0000029E 61206C612064657265-
   106 000002A7 6368610A           
   107 000002AB 332E20496E76657274-                                 db "3. Invertir el tablero", 10
   107 000002B4 697220656C20746162-
   107 000002BD 6C65726F0A         
   108 000002C2 342E204E6F20726F74-                                 db "4. No rotar", 0
   108 000002CB 617200             
   109                                      
   110 000002CE C2A1456C696A616D6F-         msgPersonalizarSimb     db "¡Elijamos los símbolos para cada personaje! Escriba un solo caracter para cada uno (si escribe más, nos quedaremos con el primero).", 0
   110 000002D7 73206C6F732073C3AD-
   110 000002E0 6D626F6C6F73207061-
   110 000002E9 726120636164612070-
   110 000002F2 6572736F6E616A6521-
   110 000002FB 204573637269626120-
   110 00000304 756E20736F6C6F2063-
   110 0000030D 617261637465722070-
   110 00000316 617261206361646120-
   110 0000031F 756E6F202873692065-
   110 00000328 736372696265206DC3-
   110 00000331 A1732C206E6F732071-
   110 0000033A 7565646172656D6F73-
   110 00000343 20636F6E20656C2070-
   110 0000034C 72696D65726F292E00 
   111 00000355 53C3AD6D626F6C6F20-         msgSimboloOficiales     db "Símbolo para los oficiales:", 0
   111 0000035E 70617261206C6F7320-
   111 00000367 6F66696369616C6573-
   111 00000370 3A00               
   112 00000372 53C3AD6D626F6C6F20-         msgSimboloSoldados      db "Símbolo para los soldados:", 0
   112 0000037B 70617261206C6F7320-
   112 00000384 736F6C6461646F733A-
   112 0000038D 00                 
   113                                  
   114 0000038E C2BF517569C3A96E20-         msgQuienInicia          db "¿Quién inicia el juego: oficiales o soldados? (o/s): ", 0
   114 00000397 696E6963696120656C-
   114 000003A0 206A7565676F3A206F-
   114 000003A9 66696369616C657320-
   114 000003B2 6F20736F6C6461646F-
   114 000003BB 733F20286F2F73293A-
   114 000003C4 2000               
   115                                  
   116 000003C6 C2A1556E206F666963-         msgOficialRetirado      db "¡Un oficial ha sido retirado del juego! Se ha olvidado de atrapar a un soldado.", 0
   116 000003CF 69616C206861207369-
   116 000003D8 646F20726574697261-
   116 000003E1 646F2064656C206A75-
   116 000003EA 65676F212053652068-
   116 000003F3 61206F6C7669646164-
   116 000003FC 6F2064652061747261-
   116 00000405 706172206120756E20-
   116 0000040E 736F6C6461646F2E00 
   117                                  
   118 00000417 4F66696369616C2031-         msgOficial1             db "Oficial 1:", 0
   118 00000420 3A00               
   119 00000422 4F66696369616C2032-         msgOficial2             db "Oficial 2:", 0
   119 0000042B 3A00               
   120                                  
   121 0000042D 4D6F76696D69656E74-         msgCantMovimientos      db "Movimientos totales: %d", 0
   121 00000436 6F7320746F74616C65-
   121 0000043F 733A20256400       
   122 00000445 2D2048616369612061-         msgCantAdelante         db "- Hacia adelante: %d", 0
   122 0000044E 64656C616E74653A20-
   122 00000457 256400             
   123 0000045A 2D204861636961206C-         msgCantDerecha          db "- Hacia la derecha: %d", 0
   123 00000463 612064657265636861-
   123 0000046C 3A20256400         
   124 00000471 2D204861636961206C-         msgCantIzquierda        db "- Hacia la izquierda: %d", 0
   124 0000047A 6120697A7175696572-
   124 00000483 64613A20256400     
   125 0000048A 2D2048616369612061-         msgCantAtras            db "- Hacia atrás: %d", 0
   125 00000493 7472C3A1733A202564-
   125 0000049C 00                 
   126 0000049D 2D20456E2064696167-         msgCantDiagonal         db "- En diagonal: %d", 0
   126 000004A6 6F6E616C3A20256400 
   127                                  
   128 000004AF C2A1456C206A756567-         msgJuegoTerminado       db "¡El juego ha terminado!", 0
   128 000004B8 6F206861207465726D-
   128 000004C1 696E61646F2100     
   129 000004C8 C2A1456C2067616E61-         msgGanador              db "¡El ganador es el equipo de los %s!", 10, 0
   129 000004D1 646F7220657320656C-
   129 000004DA 2065717569706F2064-
   129 000004E3 65206C6F7320257321-
   129 000004EC 0A00               
   130 000004EE 736F6C6461646F7300          stringSoldados          db "soldados", 0
   131 000004F7 6F66696369616C6573-         stringOficiales         db "oficiales", 0
   131 00000500 00                 
   132                                  
   133 00000501 52617AC3B36E3A2025-         msgRazonGanador         db "Razón: %s", 0
   133 0000050A 7300               
   134                                  
   135                                      ; Se ha decidido salir de la partida
   136 0000050C 536520686120646563-         msgSalidaPartida        db "Se ha decidido salir de la partida. ¿Desea guardarla? (y/n)", 0
   136 00000515 696469646F2073616C-
   136 0000051E 6972206465206C6120-
   136 00000527 706172746964612E20-
   136 00000530 C2BF44657365612067-
   136 00000539 7561726461726C613F-
   136 00000542 2028792F6E2900     
   137 00000549 6E                          guardadoPartida         db 'n' ; guardar (y), no guardar (n)
   138                                  
   139                                      ; Razones de victoria de soldados
   140 0000054A 6C6F7320736F6C6461-         msgSoldadosFortaleza    db "los soldados han ocupado todos los puntos de la fortaleza.", 0
   140 00000553 646F732068616E206F-
   140 0000055C 63757061646F20746F-
   140 00000565 646F73206C6F732070-
   140 0000056E 756E746F7320646520-
   140 00000577 6C6120666F7274616C-
   140 00000580 657A612E00         
   141 00000585 6C6F7320736F6C6461-         msgSoldadosRodean       db "los soldados han rodeado a los oficiales.", 0
   141 0000058E 646F732068616E2072-
   141 00000597 6F646561646F206120-
   141 000005A0 6C6F73206F66696369-
   141 000005A9 616C65732E00       
   142 000005AF 616D626F73206F6669-         msgSoldadosInvalidar    db "ambos oficiales han sido invalidados."
   142 000005B8 6369616C6573206861-
   142 000005C1 6E207369646F20696E-
   142 000005CA 76616C696461646F73-
   142 000005D3 2E                 
   143                                  
   144                                      ; Razones de victoria de oficiales
   145 000005D4 6E6F2071756564616E-         msgOficialesGanan       db "no quedan suficientes soldados para ocupar la fortaleza.", 0
   145 000005DD 20737566696369656E-
   145 000005E6 74657320736F6C6461-
   145 000005EF 646F73207061726120-
   145 000005F8 6F6375706172206C61-
   145 00000601 20666F7274616C657A-
   145 0000060A 612E00             
   146                                  
   147                                      ; Casillas/movimientos inválidos
   148 0000060D 436173696C6C612069-         msgCasillaVaciaSold     db "Casilla inválida: no hay un soldado en esa casilla.", 0
   148 00000616 6E76C3A16C6964613A-
   148 0000061F 206E6F206861792075-
   148 00000628 6E20736F6C6461646F-
   148 00000631 20656E206573612063-
   148 0000063A 6173696C6C612E00   
   149 00000642 436173696C6C612069-         msgCasillaVaciaOfic     db "Casilla inválida: no hay un oficial en esa casilla.", 0
   149 0000064B 6E76C3A16C6964613A-
   149 00000654 206E6F206861792075-
   149 0000065D 6E206F66696369616C-
   149 00000666 20656E206573612063-
   149 0000066F 6173696C6C612E00   
   150 00000677 4D6F76696D69656E74-         msgMovInvalidoSold      db "Movimiento inválido: no es posible mover el soldado a esa casilla.",0
   150 00000680 6F20696E76C3A16C69-
   150 00000689 646F3A206E6F206573-
   150 00000692 20706F7369626C6520-
   150 0000069B 6D6F76657220656C20-
   150 000006A4 736F6C6461646F2061-
   150 000006AD 206573612063617369-
   150 000006B6 6C6C612E00         
   151 000006BB 4D6F76696D69656E74-         msgMovInvalidoOfic      db "Movimiento inválido: no es posible mover el oficial a esa casilla.",0
   151 000006C4 6F20696E76C3A16C69-
   151 000006CD 646F3A206E6F206573-
   151 000006D6 20706F7369626C6520-
   151 000006DF 6D6F76657220656C20-
   151 000006E8 6F66696369616C2061-
   151 000006F1 206573612063617369-
   151 000006FA 6C6C612E00         
   152                                  
   153                                      ; Turnos
   154 000006FF 4573207475726E6F20-         msgTurnoSoldados        db "Es turno de los soldados. Decida a qué soldado desea mover: (F C)", 0
   154 00000708 6465206C6F7320736F-
   154 00000711 6C6461646F732E2044-
   154 0000071A 656369646120612071-
   154 00000723 75C3A920736F6C6461-
   154 0000072C 646F20646573656120-
   154 00000735 6D6F7665723A202846-
   154 0000073E 20432900           
   155 00000742 4573207475726E6F20-         msgTurnoOficiales       db "Es turno de los oficiales. Decida a qué oficial desea mover: (F C)", 0
   155 0000074B 6465206C6F73206F66-
   155 00000754 696369616C65732E20-
   155 0000075D 446563696461206120-
   155 00000766 7175C3A9206F666963-
   155 0000076F 69616C206465736561-
   155 00000778 206D6F7665723A2028-
   155 00000781 4620432900         
   156 00000786 C2BF41207175C3A920-         msgTurnoMovSold         db "¿A qué casilla desea mover el soldado? (F C)", 0
   156 0000078F 636173696C6C612064-
   156 00000798 65736561206D6F7665-
   156 000007A1 7220656C20736F6C64-
   156 000007AA 61646F3F2028462043-
   156 000007B3 2900               
   157 000007B5 C2BF41207175C3A920-         msgTurnoMovOfic         db "¿A qué casilla desea mover el oficial? (F C)", 0
   157 000007BE 636173696C6C612064-
   157 000007C7 65736561206D6F7665-
   157 000007D0 7220656C206F666963-
   157 000007D9 69616C3F2028462043-
   157 000007E2 2900               
   158                                  
   159 000007E4 556E206F6669636961-         msgCapturaSold          db "Un oficial ha capturado a un soldado.", 0
   159 000007ED 6C2068612063617074-
   159 000007F6 757261646F20612075-
   159 000007FF 6E20736F6C6461646F-
   159 00000808 2E00               
   160 0000080A C2A1556E206F666963-         msgInvalidOfic          db "¡Un oficial ha sido invalidado! No ha capturado a un soldado regalado.", 0
   160 00000813 69616C206861207369-
   160 0000081C 646F20696E76616C69-
   160 00000825 6461646F21204E6F20-
   160 0000082E 686120636170747572-
   160 00000837 61646F206120756E20-
   160 00000840 736F6C6461646F2072-
   160 00000849 6567616C61646F2E00 
   161                                      
   162                                      ; Contadores
   163                                  
   164 00000852 00                          movimientosOfic1        db 0
   165 00000853 00                          movimientosOfic2        db 0
   166                                      
   167 00000854 00                          movOfic1Adelante        db 0
   168 00000855 00                          movOfic1Derecha         db 0
   169 00000856 00                          movOfic1Izquierda       db 0
   170 00000857 00                          movOfic1Atras           db 0
   171 00000858 00                          movOfic1Diagonal        db 0
   172                                  
   173 00000859 00                          movOfic2Adelante        db 0
   174 0000085A 00                          movOfic2Derecha         db 0
   175 0000085B 00                          movOfic2Izquierda       db 0
   176 0000085C 00                          movOfic2Atras           db 0
   177 0000085D 00                          movOfic2Diagonal        db 0
   178                                  
   179 0000085E 00                          cantSoldCapturados      db 0
   180 0000085F 00                          cantOficInvalidados     db 0
   181                                  
   182 00000860 4F00                        simboloOficiales        db 'O', 0
   183 00000862 5800                        simboloSoldados         db 'X', 0
   184 00000864 04                          orientacionTablero      db  4       ; 4 -> no rotar (default) 
   185 00000865 73                          piezaDeInicio           db 's'      ; soldados (s), oficiales (o)
   186                                  
   187                                      ; Comandos 
   188                                  
   189 00000866 636C65617200                cmdLimpiarPantalla      db "clear", 0
   190                                  
   191                                  
   192                                  section .bss
   193                                  
   194 00000000 ????????                    eleccionRotar       resd 1
   195 00000004 ????????                    rotacionElegida     resd 1
   196                                  
   197 00000008 ????????                    simbOficElegido     resd 1  ; Variable pivote para el símbolo de los oficiales
   198 0000000C ????????                    simbSoldElegido     resd 1  ; Variable pivote para el símbolo de los soldados
   199                                  
   200 00000010 ????????                    piezaIniElegida     resd 1
   201                                  
   202 00000014 ????????????????            casillaMovSold      resd 2 ; Fila y columna de la casilla a mover
   203 0000001C ????????????????            casillaMovOfic      resd 2 ; Fila y columna de la casilla a mover
   204                                  
   205 00000024 <res 6Fh>                   tableroEnJuego      resb 111 ; Tablero en juego
   206                                  
   207                                  section .text
   208                                      global main
   209                                  
   210                                  main:
   211                                      
   212                                      mPuts msgBienvenida
     2 00000000 48BF-               <1>  mov rdi, %1
     2 00000002 [D001000000000000]  <1>
     3 0000000A 4883EC08            <1>  sub rsp, 8
     4 0000000E E8(00000000)        <1>  call puts
     5 00000013 4883C408            <1>  add rsp, 8
   213                                  
   214                                      personalizar:
   215 00000017 C70425[00000000]00-             mov dword[eleccionRotar], ''    ; vaciar variable
   215 0000001F 000000             
   216                                          mPuts msgPersonalizarTablero
     2 00000022 48BF-               <1>  mov rdi, %1
     2 00000024 [F101000000000000]  <1>
     3 0000002C 4883EC08            <1>  sub rsp, 8
     4 00000030 E8(00000000)        <1>  call puts
     5 00000035 4883C408            <1>  add rsp, 8
   217                                          mGets eleccionRotar
    17 00000039 48BF-               <1>  mov rdi, %1
    17 0000003B [0000000000000000]  <1>
    18 00000043 4883EC08            <1>  sub rsp, 8
    19 00000047 E8(00000000)        <1>  call gets
    20 0000004C 4883C408            <1>  add rsp, 8
   218                                  
   219 00000050 833C25[00000000]6E              cmp dword[eleccionRotar], 'n' 
   220 00000058 0F845D010000                    je comenzarPartida
   221 0000005E 833C25[00000000]73              cmp dword[eleccionRotar], 's'
   222 00000066 7419                            je personalizarRotacion
   223                                  
   224                                          mErrorJump msgOpcionInvalida, personalizar
    38                              <1>  mPuts %1
     2 00000068 48BF-               <2>  mov rdi, %1
     2 0000006A [1A02000000000000]  <2>
     3 00000072 4883EC08            <2>  sub rsp, 8
     4 00000076 E8(00000000)        <2>  call puts
     5 0000007B 4883C408            <2>  add rsp, 8
    39 0000007F EB96                <1>  jmp %2
   225                                  
   226                                      personalizarRotacion:
   227                                          mPuts msgPregRotacion
     2 00000081 48BF-               <1>  mov rdi, %1
     2 00000083 [3F02000000000000]  <1>
     3 0000008B 4883EC08            <1>  sub rsp, 8
     4 0000008F E8(00000000)        <1>  call puts
     5 00000094 4883C408            <1>  add rsp, 8
   228                                          mPuts msgRotacionesPosibles
     2 00000098 48BF-               <1>  mov rdi, %1
     2 0000009A [7D02000000000000]  <1>
     3 000000A2 4883EC08            <1>  sub rsp, 8
     4 000000A6 E8(00000000)        <1>  call puts
     5 000000AB 4883C408            <1>  add rsp, 8
   229                                  
   230 000000AF C70425[04000000]00-             mov dword[rotacionElegida], '' ; limpiar variable
   230 000000B7 000000             
   231                                          mGets rotacionElegida
    17 000000BA 48BF-               <1>  mov rdi, %1
    17 000000BC [0400000000000000]  <1>
    18 000000C4 4883EC08            <1>  sub rsp, 8
    19 000000C8 E8(00000000)        <1>  call gets
    20 000000CD 4883C408            <1>  add rsp, 8
   232                                  
   233                                          mMov orientacionTablero, rotacionElegida, 1
    31 000000D1 B901000000          <1>  mov rcx, %3
    32 000000D6 488D3425[04000000]  <1>  lea rsi, [%2]
    33 000000DE 488D3C25[64080000]  <1>  lea rdi, [%1]
    34 000000E6 F3A4                <1>  rep movsb
   234                                          
   235 000000E8 833C25[04000000]31              cmp dword[rotacionElegida], '1'
   236 000000F0 7C0C                            jl invalidaRotacion
   237 000000F2 833C25[04000000]34              cmp dword[rotacionElegida], '4'
   238 000000FA 7F02                            jg invalidaRotacion
   239                                  
   240 000000FC EB1C                            jmp personalizarSimbolos
   241                                  
   242                                      invalidaRotacion:
   243                                          mErrorJump msgOpcionInvalida, personalizarRotacion
    38                              <1>  mPuts %1
     2 000000FE 48BF-               <2>  mov rdi, %1
     2 00000100 [1A02000000000000]  <2>
     3 00000108 4883EC08            <2>  sub rsp, 8
     4 0000010C E8(00000000)        <2>  call puts
     5 00000111 4883C408            <2>  add rsp, 8
    39 00000115 E967FFFFFF          <1>  jmp %2
   244                                  
   245                                      personalizarSimbolos:
   246                                          mPuts msgPersonalizarSimb
     2 0000011A 48BF-               <1>  mov rdi, %1
     2 0000011C [CE02000000000000]  <1>
     3 00000124 4883EC08            <1>  sub rsp, 8
     4 00000128 E8(00000000)        <1>  call puts
     5 0000012D 4883C408            <1>  add rsp, 8
   247                                  
   248 00000131 E855020000                      call setearSimbSoldados
   249 00000136 E8C5020000                      call setearSimbOficiales
   250                                          
   251                                      personalizarQuienInicia:
   252 0000013B C70425[10000000]00-             mov dword[piezaIniElegida], ''    ; vaciar variable
   252 00000143 000000             
   253                                          mPuts msgQuienInicia
     2 00000146 48BF-               <1>  mov rdi, %1
     2 00000148 [8E03000000000000]  <1>
     3 00000150 4883EC08            <1>  sub rsp, 8
     4 00000154 E8(00000000)        <1>  call puts
     5 00000159 4883C408            <1>  add rsp, 8
   254                                          mGets piezaIniElegida
    17 0000015D 48BF-               <1>  mov rdi, %1
    17 0000015F [1000000000000000]  <1>
    18 00000167 4883EC08            <1>  sub rsp, 8
    19 0000016B E8(00000000)        <1>  call gets
    20 00000170 4883C408            <1>  add rsp, 8
   255                                  
   256 00000174 833C25[10000000]6F              cmp dword[piezaIniElegida], 'o' 
   257 0000017C 7423                            je setearPiezaInicio
   258 0000017E 833C25[10000000]73              cmp dword[piezaIniElegida], 's'
   259 00000186 7419                            je setearPiezaInicio
   260                                  
   261                                          mErrorJump msgOpcionInvalida, personalizarQuienInicia
    38                              <1>  mPuts %1
     2 00000188 48BF-               <2>  mov rdi, %1
     2 0000018A [1A02000000000000]  <2>
     3 00000192 4883EC08            <2>  sub rsp, 8
     4 00000196 E8(00000000)        <2>  call puts
     5 0000019B 4883C408            <2>  add rsp, 8
    39 0000019F EB9A                <1>  jmp %2
   262                                  
   263                                          setearPiezaInicio:
   264                                              mMov piezaDeInicio, piezaIniElegida, 1
    31 000001A1 B901000000          <1>  mov rcx, %3
    32 000001A6 488D3425[10000000]  <1>  lea rsi, [%2]
    33 000001AE 488D3C25[65080000]  <1>  lea rdi, [%1]
    34 000001B6 F3A4                <1>  rep movsb
   265 000001B8 EB01                                jmp comenzarPartida
   266                                      
   267 000001BA C3                          ret
   268                                  
   269                                  comenzarPartida:
   270                                      ; Se debe mostrar el tablero (en la orientacion indicada y con los simbolos indicados), 
   271                                      ; y se debe mostrar el mensaje de turno en base a lo que haya personalizado el usuario.
   272 000001BB 803C25[64080000]31              cmp byte[orientacionTablero], '1'
   273 000001C3 7443                            je rotarIzquierda
   274 000001C5 803C25[64080000]32              cmp byte[orientacionTablero], '2'
   275 000001CD 7452                            je rotarDerecha
   276 000001CF 803C25[64080000]33              cmp byte[orientacionTablero], '3'
   277 000001D7 7461                            je rotarInvertir
   278                                  
   279                                          mMov tableroEnJuego, tableroOrig, 111
    31 000001D9 B96F000000          <1>  mov rcx, %3
    32 000001DE 488D3425[00000000]  <1>  lea rsi, [%2]
    33 000001E6 488D3C25[24000000]  <1>  lea rdi, [%1]
    34 000001EE F3A4                <1>  rep movsb
   280                                  
   281                                          comenzarPorInicio:
   282 000001F0 803C25[65080000]73                  cmp byte[piezaDeInicio], 's'
   283 000001F8 7459                                je turnoSoldados
   284 000001FA 803C25[65080000]6F                  cmp byte[piezaDeInicio], 'o'
   285 00000202 0F84E4000000                        je turnoOficiales
   286                                  
   287                                      rotarIzquierda:
   288                                          mMov tableroEnJuego, tableroIzq, 111
    31 00000208 B96F000000          <1>  mov rcx, %3
    32 0000020D 488D3425[5C010000]  <1>  lea rsi, [%2]
    33 00000215 488D3C25[24000000]  <1>  lea rdi, [%1]
    34 0000021D F3A4                <1>  rep movsb
   289 0000021F EBCF                            jmp comenzarPorInicio
   290                                      
   291                                      rotarDerecha:
   292                                          mMov tableroEnJuego, tableroDer, 111
    31 00000221 B96F000000          <1>  mov rcx, %3
    32 00000226 488D3425[E8000000]  <1>  lea rsi, [%2]
    33 0000022E 488D3C25[24000000]  <1>  lea rdi, [%1]
    34 00000236 F3A4                <1>  rep movsb
   293 00000238 EBB6                            jmp comenzarPorInicio
   294                                  
   295                                      rotarInvertir:
   296                                          mMov tableroEnJuego, tableroInv, 111
    31 0000023A B96F000000          <1>  mov rcx, %3
    32 0000023F 488D3425[74000000]  <1>  lea rsi, [%2]
    33 00000247 488D3C25[24000000]  <1>  lea rdi, [%1]
    34 0000024F F3A4                <1>  rep movsb
   297 00000251 EB9D                            jmp comenzarPorInicio
   298                                  
   299                                  loopMovimientos:; mostrarTablero, mostrarTurno, realizarMovimiento, verificarFinJuego
   300                                      turnoSoldados:
   301                                          mCommand cmdLimpiarPantalla ; Limpia la pantalla para mostrar el tablero
    24 00000253 48BF-               <1>  mov rdi, %1
    24 00000255 [6608000000000000]  <1>
    25 0000025D 4883EC08            <1>  sub rsp, 8
    26 00000261 E8(00000000)        <1>  call system
    27 00000266 4883C408            <1>  add rsp, 8
   302                                  
   303                                          mPuts tableroEnJuego ; Muestro el tablero
     2 0000026A 48BF-               <1>  mov rdi, %1
     2 0000026C [2400000000000000]  <1>
     3 00000274 4883EC08            <1>  sub rsp, 8
     4 00000278 E8(00000000)        <1>  call puts
     5 0000027D 4883C408            <1>  add rsp, 8
   304                                  
   305                                          mPuts msgTurnoSoldados ; Muestro el mensaje de seleccionar ficha a mover
     2 00000281 48BF-               <1>  mov rdi, %1
     2 00000283 [FF06000000000000]  <1>
     3 0000028B 4883EC08            <1>  sub rsp, 8
     4 0000028F E8(00000000)        <1>  call puts
     5 00000294 4883C408            <1>  add rsp, 8
   306                                          mGets casillaMovSold ; Obtengo la ficha a mover
    17 00000298 48BF-               <1>  mov rdi, %1
    17 0000029A [1400000000000000]  <1>
    18 000002A2 4883EC08            <1>  sub rsp, 8
    19 000002A6 E8(00000000)        <1>  call gets
    20 000002AB 4883C408            <1>  add rsp, 8
   307 000002AF E8C1010000                      call verificarFichaSold ; verificar si la ficha elegida es valida
   308                                  
   309                                          mPuts msgTurnoMovSold ; Muestro el mensaje de seleccionar casilla a mover
     2 000002B4 48BF-               <1>  mov rdi, %1
     2 000002B6 [8607000000000000]  <1>
     3 000002BE 4883EC08            <1>  sub rsp, 8
     4 000002C2 E8(00000000)        <1>  call puts
     5 000002C7 4883C408            <1>  add rsp, 8
   310                                          mGets casillaMovSold ; Obtengo la casilla a mover
    17 000002CB 48BF-               <1>  mov rdi, %1
    17 000002CD [1400000000000000]  <1>
    18 000002D5 4883EC08            <1>  sub rsp, 8
    19 000002D9 E8(00000000)        <1>  call gets
    20 000002DE 4883C408            <1>  add rsp, 8
   311 000002E2 E890010000                      call verificarMovimientoSold ; verificar si el movimiento es valido
   312                                  
   313 000002E7 E88D010000                      call realizarMovimiento ; Realizo el movimiento
   314                                          
   315                                      turnoOficiales:
   316                                          mCommand cmdLimpiarPantalla ; Limpia la pantalla para mostrar el tablero
    24 000002EC 48BF-               <1>  mov rdi, %1
    24 000002EE [6608000000000000]  <1>
    25 000002F6 4883EC08            <1>  sub rsp, 8
    26 000002FA E8(00000000)        <1>  call system
    27 000002FF 4883C408            <1>  add rsp, 8
   317                                  
   318                                          mPuts tableroEnJuego ; Muestro el tablero
     2 00000303 48BF-               <1>  mov rdi, %1
     2 00000305 [2400000000000000]  <1>
     3 0000030D 4883EC08            <1>  sub rsp, 8
     4 00000311 E8(00000000)        <1>  call puts
     5 00000316 4883C408            <1>  add rsp, 8
   319                                  
   320                                          mPuts msgTurnoOficiales ; Muestro el mensaje de seleccionar ficha a mover
     2 0000031A 48BF-               <1>  mov rdi, %1
     2 0000031C [4207000000000000]  <1>
     3 00000324 4883EC08            <1>  sub rsp, 8
     4 00000328 E8(00000000)        <1>  call puts
     5 0000032D 4883C408            <1>  add rsp, 8
   321                                          mGets casillaMovOfic ; Obtengo la ficha a mover
    17 00000331 48BF-               <1>  mov rdi, %1
    17 00000333 [1C00000000000000]  <1>
    18 0000033B 4883EC08            <1>  sub rsp, 8
    19 0000033F E8(00000000)        <1>  call gets
    20 00000344 4883C408            <1>  add rsp, 8
   322 00000348 E829010000                      call verificarFichaOfic ; verificar si la ficha elegida es valida
   323                                  
   324                                          mPuts msgTurnoMovSold ; Muestro el mensaje de seleccionar casilla a mover
     2 0000034D 48BF-               <1>  mov rdi, %1
     2 0000034F [8607000000000000]  <1>
     3 00000357 4883EC08            <1>  sub rsp, 8
     4 0000035B E8(00000000)        <1>  call puts
     5 00000360 4883C408            <1>  add rsp, 8
   325                                          mGets casillaMovSold ; Obtengo la casilla a mover
    17 00000364 48BF-               <1>  mov rdi, %1
    17 00000366 [1400000000000000]  <1>
    18 0000036E 4883EC08            <1>  sub rsp, 8
    19 00000372 E8(00000000)        <1>  call gets
    20 00000377 4883C408            <1>  add rsp, 8
   326 0000037B E8F8000000                      call verificarMovimientoOfic ; verificar si el movimiento es valido
   327                                  
   328 00000380 E8F4000000                      call realizarMovimiento ; Realizo el movimiento
   329                                  
   330                                          ; Repetir en loop
   331 00000385 E9C9FEFFFF                      jmp loopMovimientos
   332                                  
   333 0000038A C3                          ret
   334                                  
   335                                  
   336                                  
   337                                  
   338                                  
   339                                  setearSimbSoldados:
   340                                      mPuts msgSimboloSoldados
     2 0000038B 48BF-               <1>  mov rdi, %1
     2 0000038D [7203000000000000]  <1>
     3 00000395 4883EC08            <1>  sub rsp, 8
     4 00000399 E8(00000000)        <1>  call puts
     5 0000039E 4883C408            <1>  add rsp, 8
   341 000003A2 C70425[0C000000]00-         mov dword[simbSoldElegido], ''
   341 000003AA 000000             
   342                                      mGets simbSoldElegido
    17 000003AD 48BF-               <1>  mov rdi, %1
    17 000003AF [0C00000000000000]  <1>
    18 000003B7 4883EC08            <1>  sub rsp, 8
    19 000003BB E8(00000000)        <1>  call gets
    20 000003C0 4883C408            <1>  add rsp, 8
   343                                  
   344 000003C4 803C25[0C000000]20          cmp byte[simbSoldElegido], ' '
   345 000003CC 7419                        je errSeteoSoldado
   346 000003CE 803C25[0C000000]00          cmp byte[simbSoldElegido], ''
   347 000003D6 740F                        je errSeteoSoldado
   348                                  
   349 000003D8 8A0425[0C000000]            mov al, byte[simbSoldElegido]
   350 000003DF 880425[62080000]            mov byte[simboloSoldados], al
   351                                  
   352 000003E6 C3                          ret
   353                                  
   354                                      errSeteoSoldado:
   355                                          mErrorJump msgOpcionInvalida, setearSimbSoldados
    38                              <1>  mPuts %1
     2 000003E7 48BF-               <2>  mov rdi, %1
     2 000003E9 [1A02000000000000]  <2>
     3 000003F1 4883EC08            <2>  sub rsp, 8
     4 000003F5 E8(00000000)        <2>  call puts
     5 000003FA 4883C408            <2>  add rsp, 8
    39 000003FE EB8B                <1>  jmp %2
   356                                  
   357                                  
   358                                  setearSimbOficiales:
   359                                      mPuts msgSimboloOficiales
     2 00000400 48BF-               <1>  mov rdi, %1
     2 00000402 [5503000000000000]  <1>
     3 0000040A 4883EC08            <1>  sub rsp, 8
     4 0000040E E8(00000000)        <1>  call puts
     5 00000413 4883C408            <1>  add rsp, 8
   360 00000417 C70425[08000000]00-         mov dword[simbOficElegido], ''
   360 0000041F 000000             
   361                                      mGets simbOficElegido
    17 00000422 48BF-               <1>  mov rdi, %1
    17 00000424 [0800000000000000]  <1>
    18 0000042C 4883EC08            <1>  sub rsp, 8
    19 00000430 E8(00000000)        <1>  call gets
    20 00000435 4883C408            <1>  add rsp, 8
   362                                  
   363 00000439 803C25[08000000]20          cmp byte[simbOficElegido], ' '
   364 00000441 7419                        je errSeteoOficial
   365 00000443 803C25[08000000]00          cmp byte[simbOficElegido], ''
   366 0000044B 740F                        je errSeteoOficial
   367                                  
   368 0000044D 8A0425[08000000]            mov al, byte[simbOficElegido]
   369 00000454 880425[60080000]            mov byte[simboloOficiales], al
   370                                  
   371 0000045B C3                          ret
   372                                  
   373                                      errSeteoOficial:
   374                                          mPuts msgOpcionInvalida
     2 0000045C 48BF-               <1>  mov rdi, %1
     2 0000045E [1A02000000000000]  <1>
     3 00000466 4883EC08            <1>  sub rsp, 8
     4 0000046A E8(00000000)        <1>  call puts
     5 0000046F 4883C408            <1>  add rsp, 8
   375 00000473 EB8B                            jmp setearSimbOficiales
   376                                  
   377                                  
   378                                  verificarFichaSold:
   379 00000475 C3                          ret
   380                                  
   381                                  verificarFichaOfic:
   382 00000476 C3                          ret
   383                                  
   384                                  verificarMovimientoSold:
   385 00000477 C3                          ret
   386                                  
   387                                  verificarMovimientoOfic:
   388 00000478 C3                          ret
   389                                  
   390                                  realizarMovimiento:
   391 00000479 C3                          ret
   392                                  
